* GnuCash accounts
Requirements for the GnuCash account structure are specified here.

** Base accounts
The GnuCash account structure must contain at least the following:
| name               | type      | description                     |
|--------------------+-----------+---------------------------------|
| Direktkredite      | Liability | parent to the contracts         |
| DK-Ausgleich       | Asset     | source and sink for the credits |
| Direktkreditzinsen | Expense   | interests go here               |

If these accounts do not exist yet, they will be created below the specified
accounts.

** Contract accounts
There will be exactly one asset account for each contract, where all the
transaction go to or come from.  This account will be a child to the
=Direktkredite= account, its account code will the concatenation of the parent
account code and the contract ID.

If the creditor chose to collect the interests with neither immediate pay-out
nor re-investment, the contract account has another sub-account for those
collected interests.

** Booking

| Action              | To            | From               |
|---------------------+---------------+--------------------|
| Increasing a loan   | Direktkredite | DK-Ausgleich       |
| Booking interest    | Direktkredite | Direktkreditzinsen |
| Paying out interest | DK-Ausgleich  | Direktkredite      |
| Paying back a loan  | DK-Ausgleich  | Direktkredite      |

* The database tables
For storing loan specific information, a few new tables are necessary, and
created if they do not exist yet.  These additional tables are:
** creditors
| name        | type     | required | default | comment                 |
|-------------+----------+----------+---------+-------------------------|
| creditor_id | str(36)  | True     |         | auto-generated          |
|-------------+----------+----------+---------+-------------------------|
| name        | str(100) | True     |         |                         |
| address1    | str(100) | True     |         |                         |
| address2    | str(100) | False    |         |                         |
| address3    | str(100) | False    |         |                         |
| address4    | str(100) | False    |         |                         |
| phone       | str(100) | False    |         |                         |
| email       | str(100) | False    |         | must be a valid email   |
| newsletter  | bool     | True     | False   | may newsletter be sent? |

** contracts
| name              | type            | required | default | comment           |
|-------------------+-----------------+----------+---------+-------------------|
| contract_id       | str(10)         | True     |         | same as on paper  |
|-------------------+-----------------+----------+---------+-------------------|
| creditor          | cred.cred_id    | True     |         | foreign key       |
| account           | accounts.guid   | True     |         | foreign key       |
| date              | str(YYYY-MM-DD) | True     |         | last signature    |
| amount            | float           | True     |         |                   |
| interest          | float           | True     |         | as percent        |
| interest_payment  | str [1]         | True     |         |                   |
| version           | str             | False    |         |                   |
|-------------------+-----------------+----------+---------+-------------------|
| period_type       | str [2]         | True     |         |                   |
| period_notice     | str(YYYY-MM-DD) | [3]      |         |                   |
| period_end        | str(YYYY-MM-DD) | [3]      |         |                   |
|-------------------+-----------------+----------+---------+-------------------|
| cancellation_date | str(YYYY-MM-DD) | False    | NULL    | end of contract   |
| active            | bool            | True     | True    | False if canceled |

1. One of: payout, cumulative, reinvest
2. One of: fixed_duration, fixed_period_notice, initial_plus_n
3. The required columns in this section depend on the period type, the period
   type also defines the meaning of these columns.
